from centy_Library import *

cpatrat = 4

print(f"battery voltage : {Brick.battery.voltage()}")
timer = StopWatch()
Init()
print(Brick.imu.rotation(TopAxis))
MoveTime(-80,0.6,0,1)
imux = Brick.imu.rotation(TopAxis)
wait(50)
RobotCompas(80,80,DREAPTA,0,1,1,0)
wait(50)
MoveSyncGyro(80,10*cm,1,1,1)
wait(50)
RobotCompas(80,80,STANGA,0,1,1,0)
wait(150)
RobotSpin(70,abs(imux - Brick.imu.rotation(TopAxis)),(imux - Brick.imu.rotation(TopAxis))/abs(imux - Brick.imu.rotation(TopAxis)),1,0,0,1)
wait(150)
run_task(liftGoTo(40,1,0,500))
MoveSyncGyro(80,50*cm,1,1,1)
run_task(liftGoTo(0,1,0,500))
#gata steag 1

wait(100)
run_task(liftGoTo(40,1,0,500))
wait(100)
mistake = imux - Brick.imu.rotation(TopAxis)
RobotSpin(80,90 + mistake,DREAPTA,1,0,1,1)
wait(100)
MoveSyncGyro(80,19.8*cm,1,1,1)
wait(100)
RobotSpin(80,abs(imux - Brick.imu.rotation(TopAxis)),(imux - Brick.imu.rotation(TopAxis))/abs(imux - Brick.imu.rotation(TopAxis)),1,0,1,1)
wait(100)
MoveSyncGyro(60,10*cm,1,1,1)
MoveTime(60,0.2,0,1)
run_task(clawGoTo(-70,1,0,500))
wait(100)
MoveSyncGyro(-70,9*cm,0,0,1)
wait(100)
#gata steag 2

imux = imux + 90
RobotSpin(85,abs(imux - Brick.imu.rotation(TopAxis)),(imux - Brick.imu.rotation(TopAxis))/abs(imux - Brick.imu.rotation(TopAxis)),1,0,1,1)
wait(50)
imux = imux - 90
MoveSyncGyro(55,4.5*cm,1,1,1)
wait(50)
RobotSpin(70,90,DREAPTA,1,0,1,1)
MoveSyncGyro(-70,25*cm,0,0,1)
MoveTime(-80,0.6,0,1)
mistake = imux - Brick.imu.rotation(TopAxis) + 180
print(90+mistake)
run_task(clawGoTo(0,1,0,500))
run_task(liftGoTo(0,0.7,0,500))

#incepem patrat mare

if cpatrat == 1:
    #caz ROSU
    MoveSyncGyro(80,56*cm,1,1,1)
    wait(100)
    imux = imux + 270
    RobotSpin(70,90,DREAPTA,1,0,1,1)
    wait(50)
    imux = imux - 270
    run_task(clawGoTo(0,1,0,500))
    MoveSyncGyro(80,27*cm,1,1,0)
    MoveSyncGyro(50,10*cm,0,1,1)
    run_task(clawGoTo(-200,1,0,500))
    wait(50)
    RobotCompas(90, 88, STANGA, 0, 1, 1, 10)
    wait(50)
    MoveSyncGyro(-90,15*cm,0,0,0)
    SquaringBlack(-60,10,0,0,1)
    MoveSyncGyro(60,21.5*cm,1,1,1)
    RobotCompas(-90, 88, DREAPTA, 0, 1, 1, 10)
    wait(50)
    MoveTime(-90,1,0,1)
elif cpatrat == 2:
    MoveSyncGyro(80,31*cm,1,1,1)
    wait(50)
    RobotSpin(80,90,STANGA,1,0,1,1)
    wait(50)
    MoveSyncGyro(-80,70*cm,1,0,0)
    MoveTime(-90,1,0,1)
    MoveSyncGyro(70,12*cm,1,1,1)
    RobotCompas(70, 88, DREAPTA, 0, 1, 1, 0)
    MoveSyncGyro(50,2*cm,1,1,1)
    run_task(clawGoTo(CLOSED,1,0,450))
    wait(50)
    SquaringBlack(-60,10,0,0,1)
    MoveSyncGyro(60,21.5*cm,1,1,1)
    RobotCompas(-90, 90, DREAPTA, 0, 1, 1, 10)
    MoveTime(-90,1,0,1)
elif cpatrat == 3:
    MoveSyncGyro(80,86*cm,1,1,1)
    RobotSpin(70,90,STANGA,1,0,1,1)
    MoveSyncGyro(-80,70*cm,1,0,0)
    MoveTime(-90,0.6,0,1)
    MoveSyncGyro(70,12*cm,1,1,1)
    RobotCompas(65, 88, STANGA, 0, 1, 1, 0)
    MoveSyncGyro(50,2*cm,1,1,1)
    run_task(clawGoTo(CLOSED,1,0,500))
    wait(50)
    MoveSyncGyro(80,30*cm,1,0,0)
    SquaringBlack(80,20,0,0,0)
    MoveSyncGyro(65,3*cm,0,1,1)
    wait(100)
    MoveSyncGyro(-75,6.5*cm,0,1,1)
    wait(100)
    RobotCompas(90, 88, DREAPTA, 0, 1, 1, 20)
    MoveTime(-90,1,0,1)
else:
    MoveSyncGyro(80,57.5*cm,1,1,1)
    wait(100)
    RobotSpin(70,90+mistake,DREAPTA,1,0,1,1)
    wait(100)
    run_task(clawGoTo(OPEN,1,0,500))
    MoveSyncGyro(80,28*cm,1,1,0)
    MoveSyncGyro(50,8*cm,0,1,1)
    run_task(clawGoTo(CLOSED,1,0,500))
    wait(50)
    MoveSyncGyro(-75,6*cm,0,0,0)
    MoveSyncGyro(-90,15*cm,0,1,1)
    wait(50)
    run_task(clawGoTo(OPEN,1,0,500))
    MoveSyncGyro(-90,4*cm,1,1,1)
    wait(50)
    RobotSpin(80,90,DREAPTA,1,0,1,1)
    wait(50)
    ArcMove(80,25*cm,180,STANGA,0,1,1)
    wait(100)
    imux = imux + 180
    RobotSpin(80,abs(imux - Brick.imu.rotation(TopAxis)),(imux - Brick.imu.rotation(TopAxis))/abs(imux - Brick.imu.rotation(TopAxis)),1,0,0,1)
    wait(100)
    imux = imux - 180
    MoveSyncGyro(-60,2*cm,0,1,1)
    wait(50)
    RobotSpin(80,90,STANGA,1,0,1,1)
    wait(50)
    MoveSyncGyro(-80,8*cm,1,0,0)
    MoveTime(-80,0.5,0,1)
    wait(50)
    MoveSyncGyro(80,15*cm,1,1,0)
    MoveSyncGyro(60,3.5*cm,0,1,1)
    wait(50)
    run_task(clawGoTo(CLOSED,1,0,450))
    wait(50)
    RobotCompas(-90, 90, STANGA, 0, 1, 1, 10)
    MoveSyncGyro(-60, 22*cm, 0, 0, 0)
    SquaringBlack(-60,30,0,0,0)
    MoveSyncGyro(-60,3*cm,0,1,1)
    MoveSyncGyro(60,26*cm,1,1,1)
    RobotCompas(-90, 90, DREAPTA, 0, 1, 1, 10)
    MoveTime(-90,1,0,1)


run_task(clawGoTo(SEMIOPEN+20,1,0,400))
MoveSyncGyro(60,2*cm,1,1,1)
run_task(clawGoTo(CLOSED,1,0,400))
LF1SEncoder(50, 24*cm, DREAPTA, 0, 0, 1,65)
SMove(80, 28, DREAPTA, 0, 0, 1)
MoveSyncGyro(80,30*cm,0,0,0)
SquaringBlack(70, 25, 0, 0, 0)
MoveSyncGyro(50,2*cm,0,1,1)
wait(100)
MoveSyncGyro(-70,3*cm,0,0,1)
run_task(clawGoTo(OPEN,1,0,450))
wait(50)
#gata patrat

MoveSyncGyro(-70,65*cm,1,0,0)
MoveTime(-70,1,0,1)
wait(50)
MoveSyncGyro(80,3.5*cm,1,1,1)
RobotCompas(70, 88, STANGA, 0, 1, 1, 0)
wait(50)
RobotSpin(70,abs(imux - Brick.imu.rotation(TopAxis)),(imux - Brick.imu.rotation(TopAxis))/abs(imux - Brick.imu.rotation(TopAxis)),1,0,0,1)
wait(150)
MoveSyncGyro(50,10*cm,1,1,1)
wait(50)
run_task(clawGoTo(CLOSED,1,0,500))
MoveSyncGyro(-70,9*cm,1,1,1)
wait(50)
run_task(
    multitask(
        clawGoTo(OPEN,1,0,450),
        liftGoTo(40,1,0,500)
    )
)
wait(50)
MoveSyncGyro(70,11*cm,1,1,1)
run_task(
    multitask(
        liftGoTo(DOWN,0.9,0,500),
    )
)
MoveSyncGyro(70,6.5*cm,1,1,1)
run_task(clawGoTo(CLOSED,1,0,500))
MoveSyncGyro(-70,16.5*cm,1,1,1)
wait(50)
RobotCompas(-80,88,STANGA,0,1,1,0)
wait(50)
MoveTime(-70,0.5,0,1)
run_task(clawGoTo(SEMIOPEN+20,1,0,400))
MoveSyncGyro(60,2*cm,1,1,1)
run_task(clawGoTo(CLOSED,1,0,400))
LF1SEncoder(60, 24*cm, DREAPTA, 1, 0, 0,70)
MoveSyncGyro(70,35*cm,0,1,1)
wait(50)
RobotCompas(80,90,DREAPTA,0,1,1,10)
wait(50)
MoveSyncGyro(-80,18*cm,1,0,0)
MoveTime(-80,0.9,0,1)
wait(50)
mistake = imux - Brick.imu.rotation(TopAxis) + 180
MoveSyncGyro(70,11*cm,1,1,1)
RobotSpin(70,90+mistake,STANGA,1,0,1,1)




print(timer.time()/1000)
wait(20000)